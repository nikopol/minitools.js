var hash=function(){var b,d,e=function(c){return c.toString().replace(/&/g,"%26").replace(/=/g,"%3D")},f=function(c){var h=[],a;for(a in b)h.push(e(a)+"="+e(b[a]));c&&(d=h.join("&"));document.location.hash="#"+h.join("&");return!0},a=function(){b={};d=document.location.hash.slice(1);d.length&&d.split("&").forEach(function(c){c=c.split("=");1<c.length&&(b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))})};a();return{del:function(c,a){return b.hasOwnProperty(c)?(delete b[c],f(a)):!1},set:function(c,
a,d){return"object"==typeof c?f(a,b=c):f(d,b[c]=a)},get:function(c){return arguments.length?b[c]||"":b},link:function(c){var a=[],b;if(c)for(b in c)a.push(b+"="+e(c[b]));return"#"+a.join("&")},onchange:function(c){window.onhashchange=function(){document.location.hash.slice(1)!=d&&(a(),c&&c())}}}}(),hotkeys=function(){var b={ESC:27,TAB:9,SPACE:32,RETURN:13,ENTER:13,BACKSPACE:8,BS:8,SCROLL:145,CAPSLOCK:20,NUMLOCK:144,PAUSE:19,INSERT:45,DEL:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,LEFT:37,UP:38,RIGHT:39,
DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"*":106,"+":107,"-":109,".":110,"/":111,";":186,"=":187,",":188,"`":192,"[":219,"\\":220,"]":221,"'":222},d={ALT:1,CONTROL:2,CTRL:2,SHIFT:4,META:8},e=[],f=function(a){a||(a=window.event);var c,b,f=String.fromCharCode(a.which||a.charCode).toUpperCase(),g=a.shiftKey*d.SHIFT|a.ctrlKey*d.CTRL|a.altKey*d.ALT|a.metaKey*d.META;for(c in e)if(b=e[c],!(a.which!=b.key&&f!=b.key||g!=b.mask||!b.glob&&/INPUT|SELECT|TEXTAREA|KBD/.test(document.activeElement.tagName)&&
27!=b.key))return a.stopPropagation(),a.preventDefault(),b.fn(a),!1;return!0};return{clear:function(){document.onkeydown=null;e=[];return this},add:function(a,c,h){var k=0,g=0;"string"==typeof a&&(a=[a]);a.forEach(function(a){"string"==typeof a&&("+"==a?["+"]:a.toUpperCase().split("+")).forEach(function(a){d[a]?k|=d[a]:g=b[a]?b[a]:a[0]});g?(e.push({key:g,fn:c,glob:h,mask:k||0}),1==e.length&&(document.onkeydown=f)):console.error("hotkey "+g+" unknown")});return this}}}(),browser=function(){var b={},
d=navigator.userAgent;/MSIE\s([\d\.]+)/.test(d)&&(b.IE=parseFloat(RegExp.$1));d.replace(/\s\(.+\)/g,"").split(" ").forEach(function(d){/^(.+)\/(.+)$/.test(d)&&(b[RegExp.$1]=parseFloat(RegExp.$2))});return b}(),htmlencode=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
